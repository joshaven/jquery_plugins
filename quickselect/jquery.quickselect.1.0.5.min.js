function object(d){var S=function(){};S.prototype=d;return new S();}
(function($){var d=function(f,g){f=$(f);var h={},k=true,l=-1,m=false,n,o,p,r=false,s,t;if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){if(Number(RegExp.$1)<=7){r=true;}}
s=$('<div class="'+g.resultsClass+'" style="display:block;position:absolute"></div>').hide();t=$('<iframe />');t.css({border:'none',position:'absolute'});if(g.width>0){s.css("width",g.width);t.css("width",g.width);}
$('body').append(s);if(r){$('body').append(t);}
var u=function(G){return G.label||(typeof(G)==='string'?G:G[0])||'';};var v=function(G){G=$(G);if(typeof(G.data('item'))==='string'){return G.data('item');}else{return(G.data('item')?(G.data('item').label?G.data('item').label:G.data('item')[0]):'');}};var w={quicksilver:function(q,G){q=q.toLowerCase();h[q]=[];for(var i=0;i<G.length;i++){if(u(G[i]).toLowerCase().score(q)>0){h[q].push(G[i]);}}
return h[q].sort(function(a,b){a=u(a).toLowerCase().score(q);b=u(b).toLowerCase().score(q);return(a>b?-1:(b>a?1:0));});},contains:function(q,G){q=q.toLowerCase();h[q]=[];for(var i=0;i<G.length;i++){if(u(G[i]).toLowerCase().indexOf(q)>-1){h[q].push(G[i]);}}
return h[q].sort(function(a,b){a=u(a).toLowerCase();b=u(b).toLowerCase();return(a.indexOf(q)>b.indexOf(q)?-1:(a.indexOf(q)<b.indexOf(q)?1:(a>b?-1:(b>a?1:0))));});},startsWith:function(q,G){q=q.toLowerCase();h[q]=[];for(var i=0;i<G.length;i++){if(u(G[i]).toLowerCase().indexOf(q)===0){h[q].push(G[i]);}}
return h[q].sort(function(a,b){a=u(a).toLowerCase();b=u(b).toLowerCase();return(a>b?-1:(b>a?1:0));});}};var x={store:function(q,G){G(g.data);},ajax:function(q,G){var H=g.ajax+"?q="+encodeURI(q);for(var i in g.ajaxParams){if(g.ajaxParams.hasOwnProperty(i)){H+="\x26"+i+"\x3d"+encodeURI(g.ajaxParams[i]);}}
$.getJSON(H,G);}};var y=function(G){var H=$('li',s);if(!H){return;}
if(typeof(G)==="number"){l=l+G;}
else{l=H.index(G);}
if(l<0){l=0;}
else{if(l>=H.size()){l=H.size()-1;}}
H.removeClass(g.selectedClass);$(H[l]).addClass(g.selectedClass);if(g.autoFill&&this.last_keyCode!==8){f.val(o+$(H[l]).text().substring(o.length));var I=o.length,J=f.val().length,K=f.get(0);if(K.createTextRange){var L=K.createTextRange();L.collapse(true);L.moveStart("character",I);L.moveEnd("character",J);L.select();}else if(K.setSelectionRange){K.setSelectionRange(I,J);}else if(K.selectionStart){K.selectionStart=I;K.selectionEnd=J;}
K.focus();}};var z=function(){if(p){clearTimeout(p);}
f.removeClass(g.loadingClass);if(s.is(":visible")){s.hide();}
if(t.is(":visible")){t.hide();}};var A=function(G,H){G=$(G);if(!G){G=document.createElement("li");G=$(G);G.data('item','');}
var I=v(G),J=(G.data('item')?(G.data('item').values?G.data('item').values:G.data('item')||''):'');f.lastSelected=I;f.val(I);o=I;s.empty();$(g.additional_fields).each(function(i,K){$(K).val(J[i+1]);});if(!H){z();}
if(g.onItemSelect){setTimeout(function(){g.onItemSelect(G);},1);}
return true;};var B=function(){var G=$("li."+g.selectedClass,s).get(0);if(G){return A(G);}else{if(g.exactMatch){if(!f.val()===o){f.val('');$(g.additional_fields).each(function(i,H){$(H).val('');});}}
return false;}};var C=function(G){s.empty();if(!m||G===null||G.length===0){return z();}
var H=G.length,I=function(){y(this);},J=function(){},K=function(e){e.preventDefault();e.stopPropagation();A(this);};if(g.maxVisibleItems>0&&g.maxVisibleItems<H){H=g.maxVisibleItems;}
s.append("<ul></ul>");var L=$('ul',s);for(var i=0;i<H;i++){L.append('<li></li>');var M=G[i],N=$('li:last',L);N.data('item',M);N.text(g.formatItem?g.formatItem(N.data('item'),i,H):v(N));for(var j in M.attributes){if(true){$(N).attr(j,M.attributes[j]);}}
$(L).append(N);N.hover(I,J).click(K);}
f.removeClass(g.loadingClass);return true;};var D=function(q,G){x[!g.data?'ajax':'store'](q,function(H){C(w[g.matchMethod](q,H));G();});};var E=function(){var G=f.offset(),H=(g.width>0?g.width:f.width()),I=$('li',s);s.css({width:parseInt(H,10)+"px",top:G.top+f.height()+5+"px",left:G.left+"px"});if(r){t.css({width:parseInt(H,10)-2+"px",top:G.top+f.height()+6+"px",left:G.left+1+"px",height:s.height()-2+'px'}).show();}
s.show();if(g.autoSelectFirst||(g.selectSingleMatch&&I.length===1)){y(I.get(0));}};var F=function(){if(n>=9&&n<=45){return;}
var q=f.val();if(q===o){return;}
o=q;if(q.length>=g.minChars){f.addClass(g.loadingClass);D(q,E);}else{if(q.length===0&&(g.onBlank?g.onBlank():true)){$(g.additional_fields).each(function(i,G){$(G).val('');});}
f.removeClass(g.loadingClass);s.hide();t.hide();}};s.mousedown(function(e){if(e.srcElement){k=e.srcElement.tagName!=='DIV';}});f.keydown(function(e){n=e.keyCode;switch(e.keyCode){case 38:e.preventDefault();y(-1);break;case 40:e.preventDefault();if(!s.is(":visible")){E();y(0);}else{y(1);}
break;case 13:if(B()){e.preventDefault();f.select();}
break;case 9:B();break;case 27:if(l>-1&&g.exactMatch&&f.val()!==$('li',s).get(l).text()){l=-1;}
$('li',s).removeClass(g.selectedClass);z();e.preventDefault();break;default:if(p){clearTimeout(p);}
p=setTimeout(F,g.delay);break;}}).focus(function(){m=true;}).blur(function(e){if(k){if(l>-1){B();}
m=false;if(p){clearTimeout(p);}
p=setTimeout(function(){z();if(g.exactMatch&&f.val()!==f.lastSelected){A(null,true);}},200);}else{e.srcElement.focus();}});};$.fn.quickselect=function(f,g){f=f||{};f.data=(typeof(f.data)==="object"&&f.data.constructor===Array)?f.data:undefined;f.ajaxParams=f.ajaxParams||{};if(!f.delay){f.delay=(f.ajax===undefined?10:400);}
f.minChars=f.minChars||1;f.cssFlavor=f.cssFlavor||'quickselect';f.inputClass=f.inputClass||f.cssFlavor+"_input";f.loadingClass=f.loadingClass||f.cssFlavor+"_loading";f.resultsClass=f.resultsClass||f.cssFlavor+"_results";f.selectedClass=f.selectedClass||f.cssFlavor+"_selected";f.matchMethod=f.matchMethod||((typeof''.score==='function')&&'\x6c'.score('\x6c')===1?'quicksilver':'contains');if(f.matchCase===undefined){f.matchCase=false;}
if(f.exactMatch===undefined){f.exactMatch=false;}
if(f.autoSelectFirst===undefined){f.autoSelectFirst=true;}
if(f.selectSingleMatch===undefined){f.selectSingleMatch=true;}
if(f.additional_fields===undefined){f.additional_fields=$('nothing');}
f.maxVisibleItems=f.maxVisibleItems||-1;if(f.autoFill===undefined||f.matchMethod!=='startsWith'){f.autoFill=false;}
f.width=parseInt(f.width,10)||0;this.each(function(){var h=this,k=object(f);if(h.tagName==='INPUT'){d(h,k);}else if(h.tagName==='SELECT'){f.exactMatch=true;var l={};$(h.attributes).each(function(i){if(!(/^(multiple|size)$/.test(this.nodeName))){l[this.nodeName]=this.nodeValue;}});var m=$("option:selected",h).get(0);k.data=[];$('option',h).each(function(i,r){var s={};$(r.attributes).each(function(i){if(!(/^(disabled|label|selected|value)$/.test(this.nodeName))){s[this.nodeName]=this.nodeValue;}});k.data.push({label:$(r).text(),values:[r.value,r.value],attributes:s});});var n=$("<input type='text' />");var o=$("<input type='hidden' id='"+l.id+"' name='"+l.name+"' />");for(var p in l){if(true){n.attr(p,l[p]);}}
n.attr('id',n.attr('id')+'_quickselect');if(m){o.val(m.value);n.val($(m).text());}
k.additional_fields=o;$(h).after(n).after(o).remove();n.quickselect(k);}});};})(jQuery);